<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>S̸̺̦̫̽̾͝p̸̞̼̝̓̿e̵̡̦̺̓̔c̸̢̻͚̾͋̓i̵͎̘͙̓̚̚a̵͎̼͊́̽l̴͚͍͙̓͘͘ A̴̻̫͋͐g̵͕̟̘̈́͒͝e̵̞̦͉͋̈́́n̴̘͍̒͜͝t̵̘̙̐̔͘͜ P̴̡͓͔̈́͆͑o̴̢͖̻̾̓͊r̴̙̞̻͘̚ẗ̸̡͇́͌͜͠a̴̪̞̟̓͆͝l̵̙̫͓̓͆͌</title>
    <link rel="stylesheet" href="toastify.min.css">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <section>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>
      <span></span> <span></span> <span></span> <span></span> <span></span>

      <div class="signin">
        <div class="content">
          <h1>Welcome back, Special Agent!</h1>

          <form autocomplete="off" class="form">
            <div class="inputBox">
              <input type="text" id="username" required> <i>Username</i>
            </div>

            <div class="inputBox">
              <input type="password" id="password" required> <i>Password</i>
            </div>

            <div class="inputBox">
              <input type="button" id="login" value="Login">
            </div>

            <div class="links">
              <a href="#">Challenge Creators</a><a href="#">Lean & FROST8ytes</a>
            </div>
            <div class="links">
              <a href="#">Designer</a><a href="#">Ayush Rathour</a>
            </div>
          </form>
        </div>
      </div>
    </section>

    <script src="toastify.js"></script>
    <script>
      window.onload = function () {
        const username = document.getElementById("username");
        const password = document.getElementById("password");
        const login = document.getElementById("login");

        login.addEventListener("click", async () => {
          const form = new URLSearchParams();
          form.append("username", username.value);
          form.append("password", password.value);

          try {
            const opt = {
              method: "POST",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded",
              },
              body: form,
            };

            const response = await fetch("/user", opt);

            if (!response.ok) {
              Toastify({
                text: "API error",
                style: {
                  background: "#e20404",
                },
              }).showToast();
            } else {
              const data = await response.json();
              Toastify({
                text: data.msg,
                style: {
                  background: "#04bce2",
                },
              }).showToast();
            }
          } catch (error) {
            Toastify({
              text: "Network error",
              style: {
                background: "#e20404",
              },
            }).showToast();
          }
        });
      };
    </script>
  </body>
</html>
